package ctr;

import java.util.LinkedList;

@SuppressWarnings("serial")
class Speicher extends LinkedList<String> { 
	
	LinkedList<String> liste = new LinkedList<String>();
	private int schreiberThreadAnzahl;
	private int leserThreadAnzahl;
	
	
	void writeLine(String zeile) {
		schreiberRein();
		try {
			Thread.sleep((int)(Math.random()*2000));
			liste.add(zeile);
		}
		catch(InterruptedException e) {
			System.out.println(e);
		}
		schreiberRaus();
	} 
	

	String readLine(int zeilenNummer) {
		leserRein();

		try {
			Thread.sleep((int)(Math.random()*2000));
			leserRaus();
			
		}
		catch(InterruptedException e) {
			System.out.println(e);
		}
		return this.get(zeilenNummer);
		
	}
	
	synchronized void schreiberRein() {
		schreiberThreadAnzahl++;
		System.out.println("Anzahl der Schreiber: " + schreiberThreadAnzahl);
	}
	

	synchronized void schreiberRaus() {
		schreiberThreadAnzahl--;
		System.out.println("Anzahl der Schreiber: " + schreiberThreadAnzahl);
	}
	

	synchronized void leserRein() {
		leserThreadAnzahl++;
		System.out.println("Anzahl der Leser: " + leserThreadAnzahl);
	}

	
	synchronized void leserRaus() {
		leserThreadAnzahl--;
		System.out.println("Anzahl der Leser: " + leserThreadAnzahl);
	}
	
	
}