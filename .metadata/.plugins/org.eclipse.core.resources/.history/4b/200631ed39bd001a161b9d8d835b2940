package ctr;

import java.util.concurrent.locks.ReentrantReadWriteLock;

class Leser extends Thread { 
	
	private Speicher speicherLeser;
	public ReentrantReadWriteLock.ReadLock lockLeser; 
	
	Leser(Speicher speicher, ReentrantReadWriteLock.ReadLock lock) {
		this.lockLeser = lock;
		this.speicherLeser = speicher;
	}
	
	public void run() {
		
		   int i =0;
		while(true) {
		try {
			lockLeser.lock();
			System.out.println("Leser Ausgabe: " + speicherLeser.readLine(i++));
		}
		catch(Exception e) {
			System.out.println(e);
		}finally {
		lockLeser.unlock();}
	}
	}
}
